<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Test Modali Atleti</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; font-family: monospace; }
  th, td { border: 1px solid #ccc; padding: 12px; text-align: left; }
  th { background-color: #f0f0f0; }
  .btn { padding: 6px 12px; margin-right: 6px; cursor: pointer; border-radius: 4px; border: none; font-weight: bold; }
  .btn-vis { background-color: #188df9; color: white; }
  .btn-mod { background-color: #ffcc33; color: black; }
  .modal {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;
  }
  .modal-content {
    background-color: white; padding: 20px; border-radius: 8px; width: 320px; position: relative;
  }
  .modal-close {
    position: absolute; top: 10px; right: 12px; cursor: pointer; font-size: 18px;
  }
  label { font-weight: bold; }
  input { width: 100%; padding: 6px; margin-bottom: 12px; box-sizing: border-box; }
</style>
</head>
<body>

<h1>Test Modali Atleti</h1>

<table id="table-atleti">
  <thead>
    <tr>
      <th>Cognome Nome</th>
      <th>Ruolo</th>
      <th>CF</th>
      <th>Codice</th>
      <th>Cellulare</th>
      <th>Azioni</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Modal Visualizza -->
<div id="modal-visualizza" class="modal">
  <div class="modal-content">
    <span class="modal-close" id="close-vis">&times;</span>
    <h2>Dettaglio Atleta</h2>
    <div id="vis-content"></div>
  </div>
</div>

<!-- Modal Modifica -->
<div id="modal-modifica" class="modal">
  <div class="modal-content">
    <span class="modal-close" id="close-mod">&times;</span>
    <h2>Modifica Atleta</h2>
    <form id="mod-form">
      <label for="mod-cognome">Cognome:</label>
      <input type="text" id="mod-cognome" required>
      <label for="mod-nome">Nome:</label>
      <input type="text" id="mod-nome" required>
      <label for="mod-ruolo">Ruolo:</label>
      <input type="text" id="mod-ruolo" required>
      <label for="mod-cf">Codice Fiscale:</label>
      <input type="text" id="mod-cf" required>
      <label for="mod-codice">Codice:</label>
      <input type="text" id="mod-codice" required>
      <label for="mod-cellulare">Cellulare:</label>
      <input type="text" id="mod-cellulare" required>
      <button type="submit" class="btn btn-mod">Salva</button>
    </form>
  </div>
</div>

<script>
const atleti = [
  {id:1, cognome:"Rossi", nome:"Mario", ruolo:"Libero", cf:"RSSMRA80A01H501I", codice:"1234567", cellulare:"3331234567"},
  {id:2, cognome:"Bianchi", nome:"Luca", ruolo:"Palleggiatore", cf:"BNCLCU85B22L219P", codice:"7654321", cellulare:"3357654321"}
];
const tbody = document.querySelector("#table-atleti tbody");
const modalVis = document.getElementById("modal-visualizza");
const modalMod = document.getElementById("modal-modifica");
const visContent = document.getElementById("vis-content");
const modForm = document.getElementById("mod-form");
let currentModId = null;

function renderTable() {
  tbody.innerHTML = "";
  atleti.forEach(a => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${a.cognome} ${a.nome}</td>
      <td>${a.ruolo}</td>
      <td>${a.cf}</td>
      <td>${a.codice}</td>
      <td>${a.cellulare}</td>
      <td>
        <button class="btn btn-vis" data-id="${a.id}">V</button>
        <button class="btn btn-mod" data-id="${a.id}">M</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
  document.querySelectorAll(".btn-vis").forEach(btn => {
    btn.onclick = () => {
      const id = parseInt(btn.dataset.id);
      const atleta = atleti.find(a => a.id === id);
      visContent.innerHTML = `
        <p><strong>Cognome e Nome:</strong> ${atleta.cognome} ${atleta.nome}</p>
        <p><strong>Ruolo:</strong> ${atleta.ruolo}</p>
        <p><strong>Codice Fiscale:</strong> ${atleta.cf}</p>
        <p><strong>Codice:</strong> ${atleta.codice}</p>
        <p><strong>Cellulare:</strong> ${atleta.cellulare}</p>
      `;
      modalVis.style.display = "flex";
    };
  });
  document.querySelectorAll(".btn-mod").forEach(btn => {
    btn.onclick = () => {
      const id = parseInt(btn.dataset.id);
      currentModId = id;
      const atleta = atleti.find(a => a.id === id);
      modForm["mod-cognome"].value = atleta.cognome;
      modForm["mod-nome"].value = atleta.nome;
      modForm["mod-ruolo"].value = atleta.ruolo;
      modForm["mod-cf"].value = atleta.cf;
      modForm["mod-codice"].value = atleta.codice;
      modForm["mod-cellulare"].value = atleta.cellulare;
      modalMod.style.display = "flex";
    };
  });
}
document.getElementById("close-vis").onclick = () => modalVis.style.display = "none";
document.getElementById("close-mod").onclick = () => modalMod.style.display = "none";

modForm.onsubmit = e => {
  e.preventDefault();
  const atleta = atleti.find(a => a.id === currentModId);
  atleta.cognome = modForm["mod-cognome"].value.trim();
  atleta.nome = modForm["mod-nome"].value.trim();
  atleta.ruolo = modForm["mod-ruolo"].value.trim();
  atleta.cf = modForm["mod-cf"].value.trim();
  atleta.codice = modForm["mod-codice"].value.trim();
  atleta.cellulare = modForm["mod-cellulare"].value.trim();
  modalMod.style.display = "none";
  renderTable();
};

window.onload = () => {
  renderTable();
};
</script>

</body>
</html>
